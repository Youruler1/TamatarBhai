# Implementation Plan - Frontend Development

## Overview
Build a complete React + Vite + TypeScript frontend from scratch for the Tamatar-Bhai MVP. The backend APIs are tested and working. This plan focuses on creating a polished, functional frontend with proper testing and deployment configuration.

---

## Phase 1: Project Setup & Configuration

### Task 1: Initialize Frontend Project Structure
- [ ] 1.1 Create `frontend/` directory in project root
- [ ] 1.2 Initialize Vite + React + TypeScript project
  ```bash
  npm create vite@latest frontend -- --template react-ts
  ```
- [ ] 1.3 Install core dependencies
  - React Router DOM for navigation
  - Axios for API calls
  - Lucide React for icons
  - Date-fns for date handling
- [ ] 1.4 Install TailwindCSS and configure
- [ ] 1.5 Create `.env.example` with `VITE_API_BASE_URL=http://localhost:8000`
- [ ] 1.6 Set up project folder structure:
  ```
  frontend/
  ├── src/
  │   ├── components/     # Reusable components
  │   ├── pages/          # Page components
  │   ├── services/       # API service layer
  │   ├── types/          # TypeScript interfaces
  │   ├── utils/          # Helper functions
  │   ├── App.tsx
  │   ├── main.tsx
  │   └── index.css
  ├── public/
  ├── Dockerfile
  ├── package.json
  ├── tsconfig.json
  ├── vite.config.ts
  └── tailwind.config.js
  ```
- _Requirements: 6.1, 9.1, 9.2, 11.1_

### Task 2: Create TypeScript Type Definitions
- [ ] 2.1 Create `src/types/api.ts` with all API interfaces
  - PreviewRequest, PreviewResponse
  - CompareRequest, CompareResponse
  - WeeklyResponse
  - DishModel, ErrorResponse
- [ ] 2.2 Create `src/types/components.ts` for component props
- _Requirements: 6.1_

### Task 3: Build API Service Layer
- [ ] 3.1 Create `src/services/api.ts` with axios instance
- [ ] 3.2 Configure base URL from environment variables
- [ ] 3.3 Add request/response interceptors for logging
- [ ] 3.4 Implement API methods:
  - `generatePreview(dish, meal)`
  - `compareDishes(dishA, dishB)`
  - `getWeeklySnapshot(startDate, endDate)`
  - `getDishes()`
  - `addDish(dish)`
  - `clearCache(dishName)`
  - `healthCheck()`
- [ ] 3.5 Add proper error handling and timeout configuration (30s)
- _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5, 10.1_

---

## Phase 2: Shared Components

### Task 4: Create Reusable UI Components
- [ ] 4.1 Create `src/components/LoadingSkeleton.tsx`
  - Support types: 'card', 'chart', 'text'
  - Animated shimmer effect
- [ ] 4.2 Create `src/components/ErrorBoundary.tsx`
  - Catch React errors
  - Display fallback UI
  - Log errors to console
- [ ] 4.3 Create `src/components/ImageWithFallback.tsx`
  - Handle image loading errors
  - Show placeholder on failure
  - Support lazy loading
- [ ] 4.4 Create `src/components/TabNavigation.tsx`
  - Three tabs: Daily Preview, Switch-up, Weekly
  - Active state styling
  - Responsive design
- _Requirements: 9.1, 9.2, 9.3, 10.1_

---

## Phase 3: Feature Pages

### Task 5: Build Daily Preview Page
- [ ] 5.1 Create `src/pages/DailyPreview.tsx`
- [ ] 5.2 Implement form with:
  - Dish name input (text field)
  - Meal type selector (breakfast, lunch, dinner, snack)
  - Submit button with loading state
  - Reset button
- [ ] 5.3 Display preview results:
  - Dish image (with fallback)
  - Calorie count (prominent display)
  - Bhai-style caption (styled card)
  - Formal caption (styled card)
  - Matched dish info (if fuzzy matched)
- [ ] 5.4 Add loading skeleton during API call
- [ ] 5.5 Add error handling with retry button
- [ ] 5.6 Add API attribution footer: "Generated by OpenAI & StabilityAI"
- [ ] 5.7 Add empty state with helpful instructions
- _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 9.3, 9.4, 10.1_

### Task 6: Build Switch-up Diff Page
- [ ] 6.1 Create `src/pages/SwitchupDiff.tsx`
- [ ] 6.2 Implement form with:
  - First dish input
  - Second dish input
  - Swap button (to switch dishes)
  - Compare button with loading state
  - Reset button
- [ ] 6.3 Display comparison results:
  - Side-by-side dish cards with calories
  - Visual calorie difference indicator
  - Bhai-style recommendation (prominent card)
  - Matched dish info for both dishes
- [ ] 6.4 Add loading skeleton during API call
- [ ] 6.5 Add error handling with retry button
- [ ] 6.6 Add API attribution footer
- [ ] 6.7 Add empty state with helpful instructions
- _Requirements: 2.1, 2.2, 2.3, 9.3, 9.4, 10.1_

### Task 7: Build Weekly Snapshot Page
- [ ] 7.1 Create `src/pages/WeeklySnapshot.tsx`
- [ ] 7.2 Implement form with:
  - Start date picker
  - End date picker
  - Generate button with loading state
  - Reset button
- [ ] 7.3 Display weekly results:
  - Total calories (large display)
  - Average calories per day
  - Chart image (from backend)
  - Formal summary text
  - Additional stats (meal count, unique dishes, most consumed)
- [ ] 7.4 Add date validation (end >= start, not future dates)
- [ ] 7.5 Add loading skeleton during API call
- [ ] 7.6 Add error handling with retry button
- [ ] 7.7 Add API attribution footer
- [ ] 7.8 Add empty state with helpful instructions
- [ ] 7.9 Handle "no data" scenario gracefully
- _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5, 9.3, 9.4, 10.1_

---

## Phase 4: Main Application

### Task 8: Build Main App Component
- [ ] 8.1 Create `src/App.tsx` with:
  - Header with logo and title
  - Tab navigation
  - Main content area (renders active tab)
  - Footer with attribution
- [ ] 8.2 Implement tab state management
- [ ] 8.3 Wrap app in ErrorBoundary
- [ ] 8.4 Add responsive layout (mobile-friendly)
- [ ] 8.5 Create `src/App.css` with:
  - Global styles
  - Animation keyframes
  - Utility classes
- _Requirements: 9.1, 9.2, 9.4_

### Task 9: Configure Styling
- [ ] 9.1 Set up TailwindCSS configuration
- [ ] 9.2 Create `src/index.css` with:
  - Tailwind directives
  - Custom CSS variables
  - Global resets
- [ ] 9.3 Add custom color palette (tomato theme)
- [ ] 9.4 Configure responsive breakpoints
- [ ] 9.5 Add animation utilities
- _Requirements: 9.2_

---

## Phase 5: Docker & Deployment

### Task 10: Create Frontend Dockerfile
- [ ] 10.1 Create `frontend/Dockerfile` with multi-stage build:
  - Stage 1: Build React app
  - Stage 2: Serve with nginx
- [ ] 10.2 Create `frontend/.dockerignore`
- [ ] 10.3 Create nginx configuration for SPA routing
- [ ] 10.4 Test Docker build locally
- _Requirements: 6.4, 11.2_

### Task 11: Update Docker Compose Configuration
- [ ] 11.1 Update `docker-compose.yml` to include frontend service
- [ ] 11.2 Configure frontend to depend on backend
- [ ] 11.3 Set up proper networking between services
- [ ] 11.4 Configure volume mounts for development
- [ ] 11.5 Set environment variables
- [ ] 11.6 Test full stack with `docker-compose up --build`
- _Requirements: 6.4, 11.2, 11.6_

---

## Phase 6: Testing & Quality Assurance

### Task 12: Manual Testing
- [ ] 12.1 Test Daily Preview feature:
  - Valid dish names
  - Invalid dish names
  - Empty inputs
  - API failures
  - Loading states
  - Image fallbacks
- [ ] 12.2 Test Switch-up Diff feature:
  - Valid comparisons
  - Same dish comparison
  - Empty inputs
  - Swap functionality
  - API failures
- [ ] 12.3 Test Weekly Snapshot feature:
  - Valid date ranges
  - Invalid date ranges
  - No data scenarios
  - Future dates
  - API failures
- [ ] 12.4 Test responsive design on different screen sizes
- [ ] 12.5 Test browser compatibility (Chrome, Firefox, Safari)
- [ ] 12.6 Test error boundaries
- _Requirements: 10.1, 10.2, 10.3, 10.4, 10.5_

### Task 13: Create Test Scripts
- [ ] 13.1 Create `tests/test_frontend_manual.md` with test cases
- [ ] 13.2 Create `tests/test_api_integration.sh` for API testing
- [ ] 13.3 Document expected behaviors
- [ ] 13.4 Create troubleshooting guide
- _Requirements: 11.5_

---

## Phase 7: Documentation & Demo

### Task 14: Update Documentation
- [ ] 14.1 Update `README.md` with:
  - Complete setup instructions
  - Frontend-specific configuration
  - Development workflow
  - Troubleshooting section
- [ ] 14.2 Create `frontend/README.md` with:
  - Component documentation
  - API service usage
  - Development guidelines
- [ ] 14.3 Update `.env.example` with all required variables
- [ ] 14.4 Document the "bhai style" personality in user-facing docs
- _Requirements: 11.5_

### Task 15: Create Demo Script
- [ ] 15.1 Create `run_demo.sh` script that:
  - Checks prerequisites (Docker, API keys)
  - Builds and starts services
  - Waits for services to be ready
  - Opens browser to http://localhost:3000
  - Shows helpful messages
- [ ] 15.2 Make script executable
- [ ] 15.3 Test on clean environment
- [ ] 15.4 Create `DEMO_FLOW.md` with step-by-step demo instructions
- _Requirements: 11.4, 11.5_

### Task 16: Create Demo Scenarios
- [ ] 16.1 Update `demo_scenarios.json` with:
  - Sample dish names for testing
  - Expected results
  - Edge cases to demonstrate
- [ ] 16.2 Create visual demo guide with screenshots
- _Requirements: 11.5_

---

## Phase 8: Final Polish & Optimization

### Task 17: Performance Optimization
- [ ] 17.1 Implement lazy loading for images
- [ ] 17.2 Add debouncing for API calls
- [ ] 17.3 Optimize bundle size
- [ ] 17.4 Add loading indicators for all async operations
- [ ] 17.5 Test performance with slow network
- _Requirements: 9.3, 10.1_

### Task 18: Accessibility & UX Improvements
- [ ] 18.1 Add proper ARIA labels
- [ ] 18.2 Ensure keyboard navigation works
- [ ] 18.3 Add focus indicators
- [ ] 18.4 Test with screen readers
- [ ] 18.5 Add helpful tooltips
- [ ] 18.6 Improve error messages
- _Requirements: 9.2, 9.3_

### Task 19: Final Integration Testing
- [ ] 19.1 Test complete flow: docker-compose up → use all features
- [ ] 19.2 Verify all API endpoints work correctly
- [ ] 19.3 Test with actual OpenAI and StabilityAI API calls
- [ ] 19.4 Verify caching works correctly
- [ ] 19.5 Test error scenarios (API failures, network issues)
- [ ] 19.6 Verify application is accessible at http://localhost:3000
- [ ] 19.7 Test data persistence across restarts
- _Requirements: 11.6, 10.1, 10.2, 10.3_

### Task 20: Prepare for Demo
- [ ] 20.1 Clean up console logs
- [ ] 20.2 Verify all loading states are smooth
- [ ] 20.3 Ensure error messages are user-friendly
- [ ] 20.4 Test smooth navigation between tabs
- [ ] 20.5 Prepare sample data for demo
- [ ] 20.6 Create quick start guide
- [ ] 20.7 Record demo video (optional)
- _Requirements: 9.1, 9.2, 9.3, 9.4, 11.5_

---

## Success Criteria

### Functional Requirements
✅ All three main features work (Daily Preview, Switch-up, Weekly)
✅ API integration is complete and tested
✅ Error handling works gracefully
✅ Loading states are implemented
✅ Caching is transparent to user

### Technical Requirements
✅ Docker containerization works
✅ Application runs with `docker-compose up --build`
✅ Frontend accessible at http://localhost:3000
✅ Backend accessible at http://localhost:8000
✅ No crashes even when APIs fail

### UX Requirements
✅ Clean, minimal design with cards
✅ Tab navigation is intuitive
✅ Loading skeletons during API calls
✅ API attribution is visible
✅ Responsive design works on mobile

### Documentation Requirements
✅ README has complete setup instructions
✅ Demo script works on clean environment
✅ Troubleshooting guide is helpful
✅ Code is well-commented

---

## Notes

- **Backend is already tested and working** - focus on frontend only
- **Use the existing backend API** - no backend changes needed
- **Follow the design.md specifications** for component interfaces
- **Prioritize working functionality** over perfect styling
- **Test frequently** to catch issues early
- **Keep it simple** - this is a 1-day MVP

---

## Estimated Timeline

- **Phase 1-2**: 2-3 hours (Setup & Shared Components)
- **Phase 3**: 4-5 hours (Feature Pages - main work)
- **Phase 4**: 1 hour (Main App)
- **Phase 5**: 1-2 hours (Docker & Deployment)
- **Phase 6-8**: 2-3 hours (Testing, Docs, Polish)

**Total**: ~10-14 hours of focused development
